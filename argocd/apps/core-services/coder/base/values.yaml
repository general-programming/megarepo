---
coder:
  # Environment variables for Coder
  env:
    - name: CODER_PG_CONNECTION_URL
      valueFrom:
        secretKeyRef:
          name: coder-db-app
          key: uri
    - name: CODER_ACCESS_URL
      value: "https://coder.owo.me"
    - name: CODER_WILDCARD_ACCESS_URL
      value: "*.coder.owo.me"

  # Load GitHub OAuth secrets from Vault
  envFrom:
    - secretRef:
        name: coder-secrets

  # TLS is handled by Cloudflare tunnel
  tls:
    devurlsHostSecretName: ""

  # Resources
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "2000m"
      memory: "2Gi"

  # Replicas
  replicaCount: 1

  # Service configuration
  service:
    type: ClusterIP
    externalTrafficPolicy: ""

  # Ingress disabled - using Cloudflare tunnel
  ingress:
    enable: false
